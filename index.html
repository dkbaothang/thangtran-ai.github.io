<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Th·∫Øng Tr·∫ßn AI - Karaoke Pro System</title>
    <style>
        body { background: #000; color: #fff; font-family: 'Segoe UI', Arial; text-align: center; padding: 20px; margin: 0; }
        .control-panel { background: #111; padding: 20px; border-bottom: 3px solid #ff0000; position: sticky; top: 0; z-index: 100; }
        .search-container { display: flex; max-width: 800px; margin: 0 auto; gap: 10px; }
        input { flex: 1; padding: 15px; border-radius: 30px; border: 2px solid #444; background: #222; color: #fff; font-size: 18px; }
        input:focus { border-color: #ff0000; outline: none; }
        button { padding: 10px 25px; border-radius: 30px; border: none; cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.3s; }
        .btn-mic { background: #333; color: white; font-size: 24px; }
        .btn-mic.active { background: #ff0000; box-shadow: 0 0 15px #ff0000; }
        .btn-play { background: #ff0000; color: white; }
        #player-box { margin-top: 30px; border: 4px solid #ff0000; border-radius: 20px; overflow: hidden; box-shadow: 0 0 40px rgba(255,0,0,0.3); max-width: 1100px; margin-left: auto; margin-right: auto; }
        .status-text { color: #888; font-size: 14px; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="control-panel">
        <h1>üé§ TH·∫ÆNG TR·∫¶N AI KARAOKE GLOBAL</h1>
        <div class="search-container">
            <input type="text" id="inputField" placeholder="N√≥i ho·∫∑c nh·∫≠p t√™n b√†i h√°t / D√°n link YouTube...">
            <button id="micBtn" class="btn-mic">üé§</button>
            <button class="btn-play" onclick="executeSearch()">H√ÅT</button>
        </div>
        <div id="status" class="status-text">S·∫µn s√†ng ph·ª•c v·ª• S·∫øp Th·∫Øng Tr·∫ßn!</div>
    </div>

    <div id="player-box"><div id="player"></div></div>

    <script src="https://www.youtube.com/iframe_api"></script>
<script>
const API_KEY = 'AIzaSyBChYUV6QDpytk9YjkBpuoarmc824ONOAE';
alert("H·ªá th·ªëng Karaoke AI c·ªßa S·∫øp Th·∫Øng Tr·∫ßn ƒë√£ s·∫µn s√†ng!");
    var player;

function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
        height: '600', width: '100%', videoId: 'vs_Ji3xfkzI',
        playerVars: { 'autoplay': 1, 'origin': window.location.origin, 'enablejsapi': 1 }
    });
}

async function executeSearch() {
    var input = document.getElementById('inputField').value;
    if (!input) return;
    var vid = extractVideoID(input);
    if (vid) {
        player.loadVideoById(vid);
        document.getElementById('status').innerText = "ƒêang ph√°t video ID: " + vid;
    } else {
        document.getElementById('status').innerText = "AI ƒëang t√¨m ki·∫øm b√†i h√°t cho S·∫øp...";
        const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=1&q=${encodeURIComponent(input)}&type=video&key=${API_KEY}`;
        try {
            const response = await fetch(url);
            const data = await response.json();
            if (data.items && data.items.length > 0) {
                player.loadVideoById(data.items[0].id.videoId);
                document.getElementById('status').innerText = "ƒê√£ t√¨m th·∫•y: " + data.items[0].snippet.title;
            } else {
                document.getElementById('status').innerText = "Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£.";
            }
        } catch (error) {
            document.getElementById('status').innerText = "L·ªói k·∫øt n·ªëi API.";
        }
    }
}

function extractVideoID(url) {
    var regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
    var match = url.match(regExp);
    return (match && match[2].length == 11) ? match[2] : null;
}

const micBtn = document.getElementById('micBtn');
const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.lang = 'vi-VN';
recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript;
    document.getElementById('inputField').value = transcript;
    executeSearch();
};
micBtn.onclick = () => { recognition.start(); };
</script>
</body>
</html>

