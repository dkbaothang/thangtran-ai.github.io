<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>üé§ TH·∫ÆNG TR·∫¶N KARAOKE AI</title>
    <style>
        body { background: #000; color: #fff; font-family: 'Segoe UI', Arial; text-align: center; padding: 20px; margin: 0; }
        .control-panel { background: #111; padding: 20px; border-bottom: 3px solid #f00; position: sticky; top: 0; z-index: 100; }
        .search-container { display: flex; max-width: 800px; margin: 0 auto; gap: 10px; }
        input { flex: 1; padding: 15px; border-radius: 30px; border: 2px solid #333; background: #1a1a1a; color: #fff; font-size: 16px; outline: none; }
        button { padding: 10px 25px; border-radius: 30px; border: none; cursor: pointer; font-weight: bold; background: #f00; color: #fff; }
        #player-box { margin: 20px auto; max-width: 950px; aspect-ratio: 16/9; background: #000; border-radius: 20px; overflow: hidden; box-shadow: 0 0 50px rgba(255,0,0,0.3); }
        #status { color: #f44; font-size: 14px; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="control-panel">
        <h1>üé§ TH·∫ÆNG TR·∫¶N KARAOKE AI</h1>
        <div class="search-container">
            <input type="text" id="inputField" placeholder="S·∫øp mu·ªën h√°t b√†i g√¨ ·∫°?...">
            <button id="micBtn" style="background:#333">üé§</button>
            <button onclick="executeSearch()">H√ÅT</button>
        </div>
        <div id="status">S·∫µn s√†ng ph·ª•c v·ª• S·∫øp Th·∫Øng Tr·∫ßn!</div>
    </div>
    <div id="player-box"><div id="player"></div></div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // CH√åA KH√ìA V√ÄNG CH√çNH X√ÅC T·ª™ ·∫¢NH C·ª¶A S·∫æP
        const API_KEY = 'AIzaSyCaZnEK1Ds7i3hGIIomN2gLs961nCXW91M'; 
        var player;

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%', width: '100%', videoId: 'vs_Ji3xfkzI',
                playerVars: { 'autoplay': 1, 'origin': window.location.origin, 'enablejsapi': 1 }
            });
        }

        async function executeSearch() {
            const input = document.getElementById('inputField').value.trim();
            if (!input) return;
            document.getElementById('status').innerText = "üîç AI ƒëang t√¨m b√†i h√°t chu·∫©n cho S·∫øp...";
            
            // D√íNG M√É QUY·∫æT ƒê·ªäNH: S·ª¨ D·ª§NG D·∫§U HUY·ªÄN ` ƒê·ªÇ GI·∫¢I PH√ìNG API_KEY
            const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=1&q=${encodeURIComponent(input + ' karaoke')}&type=video&key=${API_KEY}`;
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                if (data.items && data.items.length > 0) {
                    player.loadVideoById(data.items[0].id.videoId);
                    document.getElementById('status').innerText = "‚úÖ ƒê√£ t√¨m th·∫•y: " + data.items[0].snippet.title;
                } else if (data.error) {
                    document.getElementById('status').innerText = "‚ùå L·ªói: " + data.error.message;
                } else {
                    document.getElementById('status').innerText = "‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y b√†i h√°t.";
                }
            } catch (e) { document.getElementById('status').innerText = "‚ùå L·ªói m·∫°ng."; }
        }

        const micBtn = document.getElementById('micBtn');
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'vi-VN';
        micBtn.onclick = () => { recognition.start(); document.getElementById('status').innerText = "üéôÔ∏è AI ƒëang nghe S·∫øp..."; };
        recognition.onresult = (event) => {
            document.getElementById('inputField').value = event.results[0][0].transcript;
            executeSearch();
        };
    </script>
</body>
</html>
